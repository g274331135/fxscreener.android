<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="fxscreener.android.Views.SettingsPage"
             Title="Настройки подключения">

    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <Label Text="MT5 API настройки"
                   FontSize="24"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   Margin="0,0,0,20"/>

            <!-- Поля ввода -->
            <Label Text="Логин:" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding Login}"
                   Placeholder="Введите логин"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="Пароль:" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding Password}"
                   Placeholder="Введите пароль"
                   IsPassword="True"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="Хост:" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding Host}"
                   Placeholder="mt5full2.mtapi.io"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="Порт:" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding Port}"
                   Placeholder="443"
                   Keyboard="Numeric"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="API Key (GUID):" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding ApiKey}"
                   Placeholder="xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="Operation ID:" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding OperationId}"
                   Placeholder="operation id"
                   ClearButtonVisibility="WhileEditing"/>

            <Label Text="Часовой пояс (UTC смещение):" FontSize="14" FontAttributes="Bold"/>
            <Entry Text="{Binding UtcOffset}"
                   Placeholder="3 (Москва)"
                   Keyboard="Numeric"
                   ClearButtonVisibility="WhileEditing"/>

            <!-- Статус подключения -->
            <Label Text="{Binding StatusMessage}"
                   TextColor="{Binding StatusColor}"
                   HorizontalOptions="Center"
                   Margin="0,10"/>

            <!-- Кнопки -->
            <Button Text="Проверить подключение"
                    Command="{Binding TestConnectionCommand}"
                    BackgroundColor="Gray"
                    TextColor="White"
                    IsEnabled="{Binding IsNotBusy}"/>

            <Button Text="Сохранить и продолжить"
                    Command="{Binding SaveAndContinueCommand}"
                    BackgroundColor="{DynamicResource Primary}"
                    TextColor="White"
                    IsEnabled="{Binding IsNotBusy}"/>

            <ActivityIndicator IsRunning="{Binding IsBusy}"
                               Color="{DynamicResource Primary}"/>
        </VerticalStackLayout>
    </ScrollView>
</ContentPage>